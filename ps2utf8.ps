%%C- -------------------------------------------------------------------
%%C- ps2utf8 - copyright (c) 2002-2005 Leon Bottou.
%%C-
%%C- This software may be distributed under
%%C- the terms of the GNU General Public License. The license should have
%%C- accompanied the software or you may obtain a copy of the license
%%C- from the Free Software Foundation at http://www.fsf.org .
%%C-
%%C- This software may also be distributed under
%%C- the terms of the Common Public License 1.0. The license should have
%%C- accompanied the software or you may obtain a copy of the license
%%C- from the Free Software Foundation at http://www.fsf.org .
%%C-
%%C- This program is distributed in the hope that it will be useful,
%%C- but WITHOUT ANY WARRANTY; without even the implied warranty of
%%C- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%%C- GNU General Public License for more details.
%%C- -------------------------------------------------------------------


%%%% This has been made obsolete by the gdevdjvu -dExtractText parameter.
%%%% Therefore we only do what is needed to make sure that old
%%%% djvudigital scripts work as expected.

% Check that system directory is writable
systemdict wcheck not { 
  (ps2utf8: must use option -dWRITESYSTEMDICT\n) print quit 
} if

% Set global memory. 
currentglobal /setglobal load true setglobal
% Define dictionary for ps2utf8 code
systemdict begin
/ProvideUnicode true def
/ExtractText true def
/.ps2utf8 10 dict def
% Restore allocation mode
exec

% Pass ExtractText to djvusep device.
DEVICE (djvusep) eq {
  << /ExtractText true >> setpagedevice
} {
  (ps2utf8: has been made obsolete by -dExtractText in gdevdjvu.\n) print
  (ps2utf8: this is only a placeholder.\n) print
  quit 
} ifelse
